(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{416:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[projectId]/read",function(){return t(1968)}])},4796:function(n,e,t){"use strict";var r=t(4776),i=t.n(r),o=t(2322),a=t(2784),u=t(3411),c=t(5468);function s(n,e,t,r,i,o,a){try{var u=n[o](a),c=u.value}catch(s){return void t(s)}u.done?e(c):Promise.resolve(c).then(r,i)}function l(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){s(o,r,i,a,u,"next",n)}function u(n){s(o,r,i,a,u,"throw",n)}a(void 0)}))}}function d(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function f(){var n=d(["\n  font-family: ",";\n  font-size: ","px;\n\n  @media (max-width: 900px) {\n    font-size: ","px;\n  }\n"]);return f=function(){return n},n}function x(){var n=d(["\n  display: inline-block;\n  color: ",";\n  animation: blink 0.5s ease-in-out 0s infinite alternate;\n  margin-inline-start: 3px;\n\n  @keyframes blink {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n"]);return x=function(){return n},n}var p=u.ZP.span(f(),c.UY,(function(n){return n.fontSizeDesktop}),(function(n){return n.fontSizeMobile})),h=u.ZP.span(x(),(function(n){return n.hasCursor?"currentColor":"transparent"}));e.Z=function(n){var e=n.cursor,t=void 0===e||e,r=n.onFinish,u=n.pauseLength,c=void 0===u?3e3:u,s=n.shouldErase,d=void 0===s||s,f=n.shouldLoop,x=void 0===f||f,v=n.speed,b=void 0===v?100:v,m=n.fontSizeDesktop,g=void 0===m?54:m,j=n.fontSizeMobile,k=void 0===j?42:j,w=n.text,y=(0,a.useState)(""),Z=y[0],P=y[1],C=(0,a.useState)(!0),z=C[0],S=C[1],_=(0,a.useState)(!1),O=_[0],T=_[1],E=(0,a.useCallback)((function(){return new Promise((function(n){return setTimeout(n,c)}))}),[c]),I=(0,a.useCallback)(l(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Z.length<w.length)){n.next=4;break}e=w.substring(0,Z.length+1),P(e),n.next=9;break;case 4:return n.next=6,E();case 6:d&&S(!1),T(!0),r&&r();case 9:case"end":return n.stop()}}),n)}))),[Z,E,r,d,w]),L=(0,a.useCallback)(l(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Z.length){n.next=4;break}e=w.substring(0,Z.length-1),P(e),n.next=7;break;case 4:return n.next=6,E();case 6:S(!0);case 7:case"end":return n.stop()}}),n)}))),[Z,E,w]);return(0,a.useEffect)((function(){var n=setInterval((function(){if(z){if(O&&!x)return;I()}else d&&L()}),b);return function(){clearInterval(n)}}),[b,I,L,d,x,z,O]),(0,o.jsxs)(p,{fontSizeDesktop:g,fontSizeMobile:k,children:[Z,(0,o.jsx)(h,{hasCursor:t,children:"|"})]})}},1968:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return cn}});var r=t(4776),i=t.n(r),o=t(2322),a=t(5632),u=t(3411),c=t(2784),s=t(3092),l=t(3262),d=t(2024),f=t(8965),x=t(4796),p=t(5468),h=t(8217);function v(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function b(){var n=v(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  max-width: 175px;\n  margin: 0 auto;\n"]);return b=function(){return n},n}function m(){var n=v(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 42px;\n  height: 24px;\n  border-radius: 15px;\n  background: #bebebe;\n  cursor: pointer;\n  &::after {\n    content: '';\n    display: block;\n    border-radius: 50%;\n    width: 18px;\n    height: 18px;\n    margin: 3px;\n    background: #ffffff;\n    box-shadow: 1px 3px 3px 1px rgba(0, 0, 0, 0.2);\n    transition: 0.2s;\n  }\n"]);return m=function(){return n},n}function g(){var n=v(["\n  opacity: 0;\n  z-index: 1;\n  border-radius: 15px;\n  width: 42px;\n  height: 24px;\n  cursor: pointer;\n  &:checked + "," {\n    background: ",";\n    &::after {\n      content: '';\n      display: block;\n      border-radius: 50%;\n      width: 16px;\n      height: 16px;\n      margin-left: 21px;\n      transition: 0.2s;\n    }\n  }\n"]);return g=function(){return n},n}var j=u.ZP.div(b()),k=u.ZP.label(m()),w=u.ZP.input(g(),k,p.hl),y=function(n){var e=n.isChecked,t=n.onChange,r=n.label;return(0,o.jsxs)(j,{children:[(0,o.jsx)(w,{checked:e,id:"checkbox",type:"checkbox",onChange:function(n){return t(n.target.checked)}}),(0,o.jsx)(k,{htmlFor:"checkbox"}),(0,o.jsx)(h.Z,{size:"xs",padding:"0",margin:"0 0 0 1rem",children:r})]})},Z=t(4930),P=t(8975),C=t(5937),z=t(9377),S=t(7563),_=t(608),O=t(8639);function T(n,e,t,r,i,o,a){try{var u=n[o](a),c=u.value}catch(s){return void t(s)}u.done?e(c):Promise.resolve(c).then(r,i)}function E(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function I(){var n=E(["\n  margin: 4rem 6rem;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n\n  border-radius: ",";\n  box-shadow: ",";\n\n  @media (max-width: 900px) {\n    margin: 2rem 2rem;\n  }\n"]);return I=function(){return n},n}function L(){var n=E(["\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n"]);return L=function(){return n},n}function D(){var n=E(["\n  position: absolute;\n  top: 2rem;\n  right: 2rem;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n\n  :hover {\n    cursor: pointer;\n  }\n\n  @media (max-width: 900px) {\n    top: 1rem;\n  }\n"]);return D=function(){return n},n}function N(){var n=E(["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  display: inline-block;\n  margin-inline-start: 0.5rem;\n  padding: 3px;\n  transform: rotate(320deg);\n"]);return N=function(){return n},n}function M(){var n=E(["\n  padding: 2rem;\n  font-size: 42px;\n  font-family: ",";\n"]);return M=function(){return n},n}function U(){var n=E(["\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n"]);return U=function(){return n},n}function F(){var n=E(["\n  padding-inline: 2rem;\n  margin-block-end: 1rem;\n\n  ","\n"]);return F=function(){return n},n}function Y(){var n=E(["\n  font-family: ",";\n"]);return Y=function(){return n},n}function B(){var n=E(["\n  font-family: ",";\n"]);return B=function(){return n},n}function H(){var n=E(["\n  flex: 1;\n  padding: 2rem;\n  margin-block-end: 1rem;\n\n  ",";\n"]);return H=function(){return n},n}function K(){var n=E(["\n  position: relative;\n  width: 100%;\n  height: 90px;\n"]);return K=function(){return n},n}function R(){var n=E([""]);return R=function(){return n},n}function X(){var n=E(["\n  width: 180px;\n"]);return X=function(){return n},n}function G(){var n=E(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return G=function(){return n},n}var W=function(n){return"\n  animation: fadein ".concat(n,"s;\n\n  @keyframes fadein {\n      from { opacity: 0; }\n      to   { opacity: 1; }\n  }\n")},q=u.ZP.div(I(),p.B,p.S0),A=u.ZP.div(L()),J=u.ZP.div(D()),Q=u.ZP.i(N(),p._I),V=u.ZP.div(M(),p.UY),$=u.ZP.div(U()),nn=u.ZP.div(F(),W(2)),en=u.ZP.h3(Y(),p.UY),tn=u.ZP.h3(B(),p.UY),rn=u.ZP.div(H(),W(4)),on=u.ZP.div(K()),an=(u.ZP.p(R()),u.ZP.div(X())),un=u.ZP.div(G()),cn=function(){var n,e=(0,a.useRouter)(),t=(0,P.Ge)().account,r=(0,d.W)(),u=(0,_.Z)().uploadText,p=(0,S.v)(),v=p.updateText,b=p.updateTextStatus,m=(0,l.Z)(r),g=m.allowedToRead,j=m.project,k=m.text,w=m.textIpfsHash,E=m.pending,I=m.translation,L=m.hasTranslation,D=(0,c.useState)(!1),N=D[0],M=D[1],U=(0,c.useState)(!1),F=U[0],Y=U[1],B=(0,c.useState)(),H=B[0],K=B[1],R=(0,c.useState)(!0),X=R[0],G=R[1],W=(0,c.useMemo)((function(){return null!==H&&void 0!==H?H:k}),[k,H]),cn=(0,c.useMemo)((function(){var n;return!(!g||(null===t||void 0===t?void 0:t.toLowerCase())!==(null===j||void 0===j||null===(n=j.creator)||void 0===n?void 0:n.toLowerCase()))}),[g,t,null===j||void 0===j?void 0:j.creator]),sn=(0,c.useCallback)((function(n){n.preventDefault(),e.push("/projects/".concat(j.id))}),[j,e]),ln=(0,c.useCallback)((function(){F&&X&&K(void 0),Y(!F)}),[F,X]),dn=(0,c.useCallback)((n=i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(k&&w&&r){n.next=2;break}return n.abrupt("return",null);case 2:return n.next=4,u(H);case 4:return e=n.sent,n.next=7,v({projectId:r,textIpfsHash:e,oldTextIpfsHash:w,onSuccess:function(){G(!1),Y(!1)},onError:void 0});case 7:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){T(o,r,i,a,u,"next",n)}function u(n){T(o,r,i,a,u,"throw",n)}a(void 0)}))}),[H,w,r,k,v,u]),fn=(0,c.useCallback)((function(){return k&&!N?cn&&F?(0,o.jsxs)(un,{children:[(0,o.jsx)(C.Z,{text:W,onKeyDown:function(n){return K(n)},isDisabled:["confirming","waiting"].includes(b)}),(0,o.jsx)(O.Z,{onClick:dn,text:"Update",loading:["confirming","waiting"].includes(b),disabled:["confirming","waiting"].includes(b),margin:"1rem 0 0 0"})]}):(0,o.jsx)(Z.Z,{text:X?k:W}):I&&N?cn&&F?(0,o.jsx)(C.Z,{text:I,onKeyDown:function(){}}):(0,o.jsx)(Z.Z,{text:I}):void 0}),[dn,cn,F,X,k,W,I,N,b]);return E?(0,o.jsx)(q,{children:(0,o.jsx)(f.Z,{height:530})}):g||E?(0,o.jsxs)(q,{children:[(0,o.jsxs)(A,{children:[(0,o.jsx)(V,{children:(0,o.jsx)(x.Z,{cursor:!1,shouldErase:!1,shouldLoop:!1,text:j.title})}),(0,o.jsxs)(J,{onClick:sn,children:["Back to Project",(0,o.jsx)(Q,{className:"arrow"})]})]}),(0,o.jsxs)($,{children:[j.subtitle&&(0,o.jsx)(nn,{children:(0,o.jsx)(en,{children:j.subtitle})}),(0,o.jsx)(nn,{children:(0,o.jsx)(tn,{children:"By ".concat((0,s.F)(j.creator))})})]}),j.originalLanguage&&(0,o.jsxs)(nn,{children:[(0,o.jsx)(en,{children:"Original Language: ".concat(j.originalLanguage)}),L&&(0,o.jsx)(an,{children:(0,o.jsx)(y,{label:"Translation",onChange:function(n){M(n)},isChecked:N})})]}),(0,o.jsxs)(rn,{children:[cn&&(0,o.jsx)(on,{children:(0,o.jsx)(z.Z,{disabled:!k||E,onClick:ln,isEditing:F})}),fn()]})]}):(0,o.jsx)(q,{children:(0,o.jsx)(h.Z,{size:"l",children:"Sorry, you need to own an NFT to read this."})})}}},function(n){n.O(0,[774,888,179],(function(){return e=416,n(n.s=e);var e}));var e=n.O();_N_E=e}]);